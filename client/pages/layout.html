<template name="layout">
    <div class="{{class_isDrawerOpen}}" id="App">
        <header class="{{class_isDrawerOpen}}" id="App_header">
            <h1>Enso</h1>
            
            <div class="flex flex-row-nowrap align-center justify-between gap-16">
                {{#unless showAppDrawer}}
                    {{> AppNav}}
                {{/unless}}
                <button id="App_header_toggleDrawer"> 
                    {{#if isDrawerOpen}}
                        {{> icon "close"}}
                    {{else}}
                        {{> icon "menu"}}
                    {{/if}}
                </button>
            </div>
        </header>

        <main class="{{class_isDrawerOpen}}" id="App_content">
            {{> yield}}
        </main>

        {{#if false}}
            <footer class="{{class_isDrawerOpen}}" id="App_footer">
                <p class="text-center font-600 padding-8">{{appVersion}}</p>
            </footer>
        {{/if}}
    </div>

    <div class="{{class_isDrawerOpen}}" id="App_drawer">
        <div id="App_drawer_header">
            <div class="flex flex-row-nowrap align-center justify-space-between">
                <p id="App_drawer_header_profile">{{> icon "account_circle"}}</p>
                {{#if currentUser}}
                    <a href={{pathFor "logout"}} class="{{active__ifRouteActive 'logout'}}">{{> icon "logout"}} Logout</a>
                {{else}}
                    <a href={{pathFor "login"}} class="{{active__ifRouteActive 'login'}}">{{> icon "login"}} Login</a>
                {{/if}}
            </div>
            <div>
                <p>{{username}}</p>
                <p>{{userEmail}}</p>
            </div>
        </div>
        {{> AppNav}}
    </div>
    {{> alerts}}
    {{> modal}}
</template>

<template name="AppNav">
    <nav id="App_nav">
        <a href={{pathFor "home"}} class="{{active__ifRouteActive 'home'}}">{{> icon "home"}} Home</a>
        <a href={{pathFor "about"}} class="{{active__ifRouteActive 'about'}}">{{> icon "info"}} About</a>
        {{#if currentUser}}
            <a href={{pathFor "dashboard"}} class="{{active__ifRouteActive 'dashboard'}}">{{> icon "dashboard"}} Dashboard</a>
        {{/if}}
    </nav>
</template>